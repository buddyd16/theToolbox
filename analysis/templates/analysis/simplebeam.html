
{% extends "layout.html"%}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/underscore@1.13.2/underscore-umd-min.js"></script>
<script src="{{ url_for('analysis_bp.static', filename='js/SimpleBeamCharting.js') }}"></script>
<script src="{{ url_for('analysis_bp.static', filename='js/SimpleBeam.js') }}"></script>
<script src="{{ url_for('static', filename='js/plotly-2.9.0.min.js') }}"></script>
{% endblock scripts %}

{% block style %}

.table-condensed{
  font-size: 12px;
}

#loading {
    position: fixed;
    display: block;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    text-align: center;
    opacity: 0.7;
    background-color: #fff;
    z-index: 99;
  }

{% endblock style %}

{% block content %}

<div class="container">
    <div id="loading">
        <strong>"Calculating please wait..."</strong>
    </div>
    <!-- Main Beam Chart/Canvas-->
    <form method=post action="" onsubmit="ShowLoading()" onkeydown="return event.key != 'Enter';">


    <div class="row">
        <canvas id="bmCanvas" width="1000" height="400" style="border:2px solid #000000;"></canvas>
        
    </div>
    <div class="container">
        <div class="row my-2 justify-content-end align-items-center">
            <div class="col-8">
                <input class="btn btn-dark btn-lg my-1" type=submit value="Analyze Beam">
            </div>
            <div class="col-4 justify-content-end">
                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label id="imperial_button" class="btn btn-sm {{ " btn-primary active" if inputs["units"] == "imperial" else " btn-secondary"}}">
                        <input type="radio" name="units" id="imperial" autocomplete="off" value="imperial" {{ "checked" if inputs["units"] == "imperial"}}> Imperial
                    </label>
                    <label id="metric_button" class="btn  btn-sm {{ "  btn-primary active" if inputs["units"] == "metric" else " btn-secondary"}}">
                        <input type="radio" name="units" id="metric" autocomplete="off" value="metric" {{ "checked" if inputs["units"] == "metric"}}> Metric
                    </label>
                </div>
            </div>
        </div>
    </div>
    <!-- Inputs -->
    <div class="row">
        <div id="tabs" class="bg-light">
            <!-- Nav pills -->
            <ul class="nav nav-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#spanData">Span Data</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#combosLoads">Load information and Combinations</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#distributedLoads">Distributed Loads</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#concentratedLoads">Concentrated Loads</a>
                </li>
                {% if results != None %}
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#genResults">General Results</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#ulsResults">ULS Results</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#slsResults">SLS Results</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#basicResults">Basic Results</a>
                </li>
                {% if results['calclog'] %}
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#calclog">Calc Log</a>
                </li>
                {% endif %}
                {% endif %}
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#HELP">Help</a>
                </li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <!-- SPAN DATA -->
                <div class="tab-pane container active" id="spanData">
                    <div class="container-sm py-3">
                        <table id="spanTable" class="table table-sm table-dark w-auto">
                            <tr>
                            <td class="text-right">Span:</td>
                            <td><input id="span" name="span" class="span input-sm chartUpdate" style="width:95px" type="number" step="any" min="0.25" value="{{ inputs["span"] }}"></td>
                            <td class="length_units">{{ "ft" if inputs["units"]=="imperial" else "m"}}</td>
                            </tr>
                            <tr>
                            <td class="text-right">E:</td>
                            <td><input id="spanE" name="spanE" class="spanE input-sm" style="width:95px" type="number" step="any" min="0.1" value="{{ inputs["E"] }}"></td>
                            <td id="em_units">{{ "ksi" if inputs["units"]=="imperial" else "Mpa"}}</td>
                            </tr>
                            <tr>
                            <td class="text-right">I:</td>
                            <td><input id="spanI" name="spanI" class="spanI input-sm" style="width:95px" type="number" step="any" min="0.1" value="{{ inputs["I"] }}"></td>
                            <td id="ixx_units">{{ "in<sup>4</sup>"|safe if inputs["units"]=="imperial" else "mm<sup>4</sup> (use e or E for powers of 10, i.e. 2.3e10 or 2.3E10)"|safe}}</td>
                            </tr>
                            <tr>
                            <td class="text-right">Overhang Left:</td>
                            <td><input id="overhangLeft" name="overhangLeft" class="overhangLeft input-sm chartUpdate" style="width:95px" type="number" step="any" min="0" value="{{ inputs["OverL"] }}" {{"disabled" if inputs["fl"] == 1}}></td>
                            <td class="length_units">{{ "ft" if inputs["units"]=="imperial" else "m"}}</td>
                            </tr>
                            <tr>
                            <td class="text-right">Overhang Right:</td>
                            <td><input id="overhangRight" name="overhangRight" class="overhangRight input-sm chartUpdate" style="width:95px" type="number" step="any" min="0" value="{{ inputs["OverR"] }}" {{"disabled" if inputs["fr"] == 1}}></td>
                            <td class="length_units">{{ "ft" if inputs["units"]=="imperial" else "m"}}</td>
                            </tr>
                            <tr>
                            <td class="text-right">Fixed Left:</td>
                            <td><input id="fixedLeft" name="fixedLeft" class="fixedLeft input-sm chartUpdate" type="checkbox" value="fixedLeft" {{ "checked" if inputs["fl"] == 1}}></td>
                            <td>Disables the left overhang and sets value to 0 if selected.</td>
                            </tr>
                            <tr>
                            <td class="text-right">Fixed Right:</td>
                            <td><input id="fixedRight" name="fixedRight" class="fixedRight input-sm chartUpdate" type="checkbox" value="fixedRight" {{ "checked" if inputs["fr"] == 1}}></td>
                            <td>Disables the right overhang and sets value to 0 if selected.</td>
                            </tr>
                        </table>
                    </div>

                    <div class="container-sm py-3">
                        <h5>Additional Interior Roller Support Locations:</h5>
                        <p>(The 6 Simplified ACI patterns will be used when the number of patterns exceeds 63 (6 spans) full general patterning is factorial)</p>
                        <table id="interiorsupportsTable" class="table table-sm table-dark w-auto chartUpdate">
                            <tbody>
                                {% for support in inputs["intSups"] %}
                                {% if loop.index0 == 0 %}
                                <tr class="interiorsupportRow">
                                    <td class="interiorsupportuid">{{"R" ~loop.index}}</td>
                                    <td><input id="interiorSupport" name="interiorSupport" class="interiorSupport input-sm" style="width:65px" type="number" step="any" min="0" value="{{support}}"></td>
                                    <td class="length_units">{{ "ft" if inputs["units"]=="imperial" else "m"}}</td>

                                    <!-- Button to Add a Support -->
                                    <td>    
                                    <button type="button" class="addSupportFirst btn btn-secondary btn-success btn-sm">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                                    </svg>
                                    </button>
                                    </td>
                                </tr>
                                {% else %}
                                <tr class="interiorsupportRow">
                                    <td class="interiorsupportuid">{{"R" ~loop.index}}</td>
                                    <td><input id="interiorSupport2" name="interiorSupport" class="interiorSupport input-sm" style="width:65px" type="number" step="any" min="0" value="{{support}}"></td>
                                    <td class="length_units">{{ "ft" if inputs["units"]=="imperial" else "m"}}</td>
                                    <td>
                                        <button type="button" class="addSupport btn btn-secondary btn-success btn-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg>
                                        </button><a href="#" class="removeSupportButton badge badge-danger" style="margin-left: 5px">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path></svg></a>
                                    </td>
                                </tr>
                                {% endif %}


                                {% endfor %}
                            </tbody>
                        </table>

                    </div>
                </div>
                
                <!-- COMBOS AND LOAD DATA -->
                <div class="tab-pane container fade" id="combosLoads">
                    <div class="container-sm py-3">
                        <h5> Off Pattern Factors</h5>
                        <p>Typically 0 for L, L<sub>r</sub>, and R and 0.5 for S</p>
                        <p>Off Patterns of 1 will result in no patterning for that load type</p>
                        <table id="patternfactorTable" class="table table-sm table-dark w-auto">
                            <thead>
                                <tr>
                                <th class="text-center"> L </th>
                                <th class="text-center"> L<sub>r</sub> </th>
                                <th class="text-center"> S </th>
                                <th class="text-center"> R </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="patterfactorsRow">
                                    <td><input id="Lpatternfactor" name="Lpatternfactor" class="Lpatternfactor input-sm" style="width:65px" type="number" step="any" value="{{inputs["offPat"][0]}}"></td>
                                    <td><input id="Lrpatternfactor" name="Lrpatternfactor" class="Lrpatternfactor input-sm" style="width:65px" type="number" step="any" value="{{inputs["offPat"][1]}}"></td>
                                    <td><input id="Spatternfactor" name="Spatternfactor" class="Spatternfactor input-sm" style="width:65px" type="number" step="any" value="{{inputs["offPat"][2]}}"></td>
                                    <td><input id="Rpatternfactor" name="Rpatternfactor" class="Rpatternfactor input-sm" style="width:65px" type="number" step="any" value="{{inputs["offPat"][3]}}"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="container-sm py-3">
                        <h5> Ultimate Combinations for Shear and Moment (ULS):</h5>
                        <div class="form-check">
                            <input type="radio" id="designCombo_IBC_ASD" class="designCombo form-check-input" name="designCombo" value="IBC_ASD" {{ "checked" if inputs["combos"] == 0}}>
                            <label class="form-check-label" for="designCombo_IBC_ASD"><h6>IBC 2018 - ASD (Section 1605.3.1)</h6></label>
                        </div>
                        <div class="form-check">
                            <input type="radio" id="designCombo_IBC_LRFD" class="designCombo form-check-input" name="designCombo" value="IBC_LRFD" {{ "checked" if inputs["combos"] == 1}}>
                            <label class="form-check-label" for="designCombo_IBC_LRFD"><h6>IBC 2018 - LRFD (Section 1605.2)</h6></label>
                        </div>
                        <div class="form-check">
                            <input type="radio" id="designCombo_BCBC2018" class="designCombo form-check-input" name="designCombo" value="BCBC_2018" {{ "checked" if inputs["combos"] == 2}}>
                            <label class="form-check-label" for="designCombo_BCBC2018"><h6>BCBC 2018 - Table 4.1.3.2-A</h6></label>
                        </div>
                        <div class="form-check">
                            <input type="radio" id="designCombo_USER" class="designCombo form-check-input" name="designCombo" value="USER" {{ "checked" if inputs["combos"] == 3}}>
                            <label class="form-check-label" for="designCombo_USER"><h6>Only Consider User Defined Combinations</h6></label>
                        </div>
                        <div>
                            <table id="combofs" class="table table-sm table-dark w-auto">
                                <tr class="combof1Row">
                                    <td>f1 :</td>
                                    <td>
                                        <select id="IBC_f1" class="IBC_f1 input-sm" name="IBC_f1" style="width:95px">
                                            <option value="1" {{ "selected=""selected""" if inputs["f1"] == 1}}> 1 </option>
                                            <option value="0.5" {{ "selected=""selected""" if inputs["f1"] != 1}}> 0.5 </option>
                                        </select>
                                    </td>
                                    <td id="IBC_f1_string">
                                        {% if inputs["f1"] == 1 %}
                                            Public Assembly, L > 100 psf, or parking garage.
                                        {% else %}
                                            other L.
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="combof2Row">
                                    <td>f2 :</td>
                                    <td>
                                        <select id="IBC_f2" class="IBC_f2 input-sm" name="IBC_f2" style="width:95px">
                                            <option value="0.7" {{ "selected=""selected""" if inputs["f2"] == 0.7}}> 0.7 </option>
                                            <option value="0.2" {{ "selected=""selected""" if inputs["f2"] != 0.7}}> 0.2 </option>
                                        </select>
                                    </td>
                                    <td id="IBC_f2_string">
                                        {% if inputs["f2"] == 0.7 %}
                                            Roof configuration does not shed snow.
                                        {% else %}
                                            Other roof configurations.
                                        {% endif %}
                                    </td>
                                </tr>
                                <tr class="combo_lateral_reverse_row">
                                    <td>Auto Reverse Lateral Loads :</td>
                                    <td>
                                        <select id="latReverse" class="latReverse input-sm" name="latReverse" style="width:95px">
                                            <option value="1" {{ "selected=""selected""" if inputs["latReverse"] == 1}}> Yes </option>
                                            <option value="0" {{ "selected=""selected""" if inputs["latReverse"] != 1}}> No </option>
                                        </select>
                                    </td>
                                    <td>
                                        Only applies to Generated Combos.
                                    </td>
                                </tr>
                            </table>
                        </div>

                    </div>

                    <div class="container-sm py-3">
                        <h5> User Ultimate Combinations (ULS):</h5>
                        <p>Note: Set all factors to 0 to ignore user defined ULS Combos.</p>
                        <table id="ulscomboTable" class="table table-sm table-dark w-auto">
                            <thead>
                                <tr>
                                <th> Combo</br>ID </th>
                                <th class="text-center"> D </th>
                                <th class="text-center"> F </th>
                                <th class="text-center"> L </th>
                                <th class="text-center"> H </th>
                                <th class="text-center"> L<sub>r</sub> </th>
                                <th class="text-center"> S </th>
                                <th class="text-center"> R </th>
                                <th class="text-center"> Wx </th>
                                <th class="text-center"> Wy </th>
                                <th class="text-center"> Ex </th>
                                <th class="text-center"> Ey </th>
                                <th class="text-center"> Pattern </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for uls in inputs["uls"] %}
                                {% if loop.index0 == 0 %}
                                <tr class="ulsCombo">
                                <td class="ulscombouid">{{"U"~ loop.index}}</td>
                                <td><input id="Dufactor" name="Dufactor" class="Dufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[0]}}"></td>
                                <td><input id="Fufactor" name="Fufactor" class="Fufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[1]}}"></td>
                                <td><input id="Lufactor" name="Lufactor" class="Lufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[2]}}"></td>
                                <td><input id="Hufactor" name="Hufactor" class="Hufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[3]}}"></td>
                                <td><input id="Lrufactor" name="Lrufactor" class="Lrufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[4]}}"></td>
                                <td><input id="Sufactor" name="Sufactor" class="Sufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[5]}}"></td>
                                <td><input id="Rufactor" name="Rufactor" class="Rufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[6]}}"></td>
                                <td><input id="Wxufactor" name="Wxufactor" class="Wxufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[7]}}"></td>
                                <td><input id="Wyufactor" name="Wyufactor" class="Wyufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[8]}}"></td>
                                <td><input id="Exufactor" name="Exufactor" class="Exufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[9]}}"></td>
                                <td><input id="Eyufactor" name="Eyufactor" class="Eyufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[10]}}"></td>
                                <td>
                                    <select id="ulspattern" class="ulspattern input-sm" name="ulspattern" style="width:59px">
                                        <option value="1" {{ "selected=""selected""" if uls[11] == 1}}> y </option>
                                        <option value="0" {{ "selected=""selected""" if uls[11] != 1}}> n </option>
                                    </select>
                                </td>
                                <!-- Button to Add a Combo -->
                                <td>    
                                <button type="button" class="addULSComboFirst btn btn-secondary btn-success btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                                </svg>
                                </button>
                                </td>
                                
                                </tr>
                                {% else %}
                                <tr class="ulsCombo">
                                    <td class="ulscombouid">{{"U"~ loop.index}}</td>
                                    <td><input id="Dufactor2" name="Dufactor" class="Dufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[0]}}"></td>
                                    <td><input id="Fufactor2" name="Fufactor" class="Fufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[1]}}"></td>
                                    <td><input id="Lufactor2" name="Lufactor" class="Lufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[2]}}"></td>
                                    <td><input id="Hufactor2" name="Hufactor" class="Hufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[3]}}"></td>
                                    <td><input id="Lrufactor2" name="Lrufactor" class="Lrufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[4]}}"></td>
                                    <td><input id="Sufactor2" name="Sufactor" class="Sufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[5]}}"></td>
                                    <td><input id="Rufactor2" name="Rufactor" class="Rufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[6]}}"></td>
                                    <td><input id="Wxufactor2" name="Wxufactor" class="Wxufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[7]}}"></td>
                                    <td><input id="Wyufactor2" name="Wyufactor" class="Wyufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[8]}}"></td>
                                    <td><input id="Exufactor2" name="Exufactor" class="Exufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[9]}}"></td>
                                    <td><input id="Eyufactor2" name="Eyufactor" class="Eyufactor input-sm" style="width:59px" type="number" step="any" value="{{uls[10]}}"></td>
                                    <td>
                                        <select id="ulspattern" class="ulspattern input-sm" name="ulspattern" style="width:59px">
                                            <option value="1" {{ "selected=""selected""" if uls[11] == 1}}> y </option>
                                            <option value="0" {{ "selected=""selected""" if uls[11] != 1}}> n </option>
                                        </select>
                                    </td>
                                    <td>
                                        <button type="button" class="addULSCombo btn btn-secondary btn-success btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg></button>
                                        <a href="#" class="removeULSCombo badge badge-danger" style="margin-left: 5px">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                            </svg>
                                        </a>
                                    </td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <div class="container-sm py-3">
                        <h5> User Service Combinations (SLS):</h5>
                        <p>Note: There are no automated service combinations, please provide at least one.</p>
                        <table id="servicecomboTable" class="table table-sm table-dark w-auto">
                            <thead>
                                <tr>
                                <th> Combo</br>ID </th>
                                <th class="text-center"> D </th>
                                <th class="text-center"> F </th>
                                <th class="text-center"> L </th>
                                <th class="text-center"> H </th>
                                <th class="text-center"> L<sub>r</sub> </th>
                                <th class="text-center"> S </th>
                                <th class="text-center"> R </th>
                                <th class="text-center"> Wx </th>
                                <th class="text-center"> Wy </th>
                                <th class="text-center"> Ex </th>
                                <th class="text-center"> Ey </th>
                                <th class="text-center"> Pattern </th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for sls in inputs["sls"] %}
                                {% if loop.index0 == 0 %}
                                <tr class="serviceCombo">
                                <td class="servicecombouid">{{"S"~ loop.index}}</td>
                                <td><input id="Dsfactor" name="Dsfactor" class="Dsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[0]}}"></td>
                                <td><input id="Fsfactor" name="Fsfactor" class="Fsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[1]}}"></td>
                                <td><input id="Lsfactor" name="Lsfactor" class="Lsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[2]}}"></td>
                                <td><input id="Hsfactor" name="Hsfactor" class="Hsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[3]}}"></td>
                                <td><input id="Lrsfactor" name="Lrsfactor" class="Lrsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[4]}}"></td>
                                <td><input id="Ssfactor" name="Ssfactor" class="Ssfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[5]}}"></td>
                                <td><input id="Rsfactor" name="Rsfactor" class="Rsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[6]}}"></td>
                                <td><input id="Wxsfactor" name="Wxsfactor" class="Wxsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[7]}}"></td>
                                <td><input id="Wysfactor" name="Wysfactor" class="Wysfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[8]}}"></td>
                                <td><input id="Exsfactor" name="Exsfactor" class="Exsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[9]}}"></td>
                                <td><input id="Eysfactor" name="Eysfactor" class="Eysfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[10]}}"></td>
                                <td>
                                    <select id="slspattern" class="slspattern input-sm" name="slspattern" style="width:59px">
                                        <option value="1" {{ "selected=""selected""" if sls[11] == 1}}> y </option>
                                        <option value="0" {{ "selected=""selected""" if sls[11] != 1}}> n </option>
                                    </select>
                                </td>
                                <!-- Button to Add a Combo -->
                                <td>    
                                <button type="button" class="addServiceComboFirst btn btn-secondary btn-success btn-sm">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                                </svg>
                                </button>
                                </td>
                                
                                </tr>
                                {% else %}
                                <tr class="serviceCombo">
                                    <td class="servicecombouid">{{"S"~ loop.index}}</td>
                                    <td><input id="Dsfactor2" name="Dsfactor" class="Dsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[0]}}"></td>
                                    <td><input id="Fsfactor2" name="Fsfactor" class="Fsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[1]}}"></td>
                                    <td><input id="Lsfactor2" name="Lsfactor" class="Lsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[2]}}"></td>
                                    <td><input id="Hsfactor2" name="Hsfactor" class="Hsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[3]}}"></td>
                                    <td><input id="Lrsfactor2" name="Lrsfactor" class="Lrsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[4]}}"></td>
                                    <td><input id="Ssfactor2" name="Ssfactor" class="Ssfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[5]}}"></td>
                                    <td><input id="Rsfactor2" name="Rsfactor" class="Rsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[6]}}"></td>
                                    <td><input id="Wxsfactor2" name="Wxsfactor" class="Wxsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[7]}}"></td>
                                    <td><input id="Wysfactor2" name="Wysfactor" class="Wysfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[8]}}"></td>
                                    <td><input id="Exsfactor2" name="Exsfactor" class="Exsfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[9]}}"></td>
                                    <td><input id="Eysfactor2" name="Eysfactor" class="Eysfactor input-sm" style="width:59px" type="number" step="any" value="{{sls[10]}}"></td>
                                    <td>
                                        <select id="slspattern" class="slspattern input-sm" name="slspattern" style="width:59px">
                                            <option value="1" {{ "selected=""selected""" if sls[11] == 1}}> y </option>
                                            <option value="0" {{ "selected=""selected""" if sls[11] != 1}}> n </option>
                                        </select>
                                    </td>
                                    <td>
                                        <button type="button" class="addServiceCombo btn btn-secondary btn-success btn-sm"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16"><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path></svg></button>
                                        <a href="#" class="removeServiceCombo badge badge-danger" style="margin-left: 5px">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                            </svg>
                                        </a>
                                    </td>
                                </tr>
                                {% endif %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- DISTRIBUTED LOAD DATA -->
                <div class="tab-pane container fade" id="distributedLoads">
                    <h5> Distributed Loads:</h5>
                    <table id="distloadTable" class="table table-sm table-dark w-auto">
                        <thead>
                            <tr id="dist_load_header_row">
                                <th> Load</br>ID </th>
                                {% if inputs["units"]=="imperial" %}
                                
                                <th class="text-center"> w<sub>1</sub> (psf) </th>
                                <th class="text-center"> trib<sub>1</sub> (ft) </th>
                                <th class="text-center"> w<sub>2</sub> (psf) </th>
                                <th class="text-center"> trib<sub>2</sub> (ft) </th>
                                <th class="text-center"> a (ft) </th>
                                <th class="text-center"> b (ft) </th>
                                
                                {% else %}
                                <th class="text-center"> w<sub>1</sub> (kPa) </th>
                                <th class="text-center"> trib<sub>1</sub> (m) </th>
                                <th class="text-center"> w<sub>2</sub> (kPa) </th>
                                <th class="text-center"> trib<sub>2</sub> (m) </th>
                                <th class="text-center"> a (m) </th>
                                <th class="text-center"> b (m) </th>
                                {% endif %}
                                <th class="text-center"> Load Type</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for distLoad in inputs["distLoads"] %}
                            {% if loop.index0 == 0 %}
                            <tr class="userDistLoad">
                            <td class="distloaduid">{{"D" ~ loop.index}}</td>
                            <td><input id="w1" name="w1" class="w1 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[0]}}" onChange="UpdateChart();"></td>
                            <td><input id="trib1" name="trib1" class="trib1 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[1]}}" onChange="UpdateChart();"></td>
                            <td><input id="w2" name="w2" class="w2 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[2]}}" onChange="UpdateChart();"></td>
                            <td><input id="trib2" name="trib2" class="trib2 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[3]}}" onChange="UpdateChart();"></td>
                            <td><input id="dista" name="dista" class="dista input-sm" style="width:95px" type="number" step="any" value="{{distLoad[4]}}" onChange="UpdateChart();"></td>
                            <td><input id="distb" name="distb" class="distb input-sm" style="width:95px" type="number" step="any" value="{{distLoad[5]}}" onChange="UpdateChart();"></td>
                            <td>
                                <select id="distloadType" class="distloadType input-sm" name="distloadType" style="width:95px" onChange="UpdateChart();">
                                    <option value="D" {{"selected=""selected""" if distLoad[6]=="D"}}> D </option>
                                    <option value="F" {{"selected=""selected""" if distLoad[6]=="F"}}> F </option>
                                    <option value="L" {{"selected=""selected""" if distLoad[6]=="L"}}> L </option>
                                    <option value="H" {{"selected=""selected""" if distLoad[6]=="H"}}> H </option>
                                    <option value="Lr" {{"selected=""selected""" if distLoad[6]=="Lr"}}> L<sub>r</sub> </option>
                                    <option value="S" {{"selected=""selected""" if distLoad[6]=="S"}} > S </option>
                                    <option value="R" {{"selected=""selected""" if distLoad[6]=="R"}}> R </option>
                                    <option value="Wx" {{"selected=""selected""" if distLoad[6]=="Wx"}}> Wx </option>
                                    <option value="Wy" {{"selected=""selected""" if distLoad[6]=="Wy"}}> Wy </option>
                                    <option value="Ex" {{"selected=""selected""" if distLoad[6]=="Ex"}}> Ex </option>
                                    <option value="Ey" {{"selected=""selected""" if distLoad[6]=="Ey"}}> Ey </option>
                                </select>
                            </td>
                            <td>    
                            <button type="button" class="addDistLoadFirst btn btn-secondary btn-success btn-sm">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                            </svg>
                            </button>
                            </td>
                            </tr>
                            {% else %}
                            <tr class="userDistLoad">
                                <td class="distloaduid">{{"D" ~ loop.index}}</td>
                                <td><input id="w1" name="w1" class="w1 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[0]}}" onChange="UpdateChart();"></td>
                                <td><input id="trib1" name="trib1" class="trib1 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[1]}}" onChange="UpdateChart();"></td>
                                <td><input id="w2" name="w2" class="w2 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[2]}}" onChange="UpdateChart();"></td>
                                <td><input id="trib2" name="trib2" class="trib2 input-sm" style="width:95px" type="number" step="any" value="{{distLoad[3]}}" onChange="UpdateChart();"></td>
                                <td><input id="dista" name="dista" class="dista input-sm" style="width:95px" type="number" step="any" value="{{distLoad[4]}}" onChange="UpdateChart();"></td>
                                <td><input id="distb" name="distb" class="distb input-sm" style="width:95px" type="number" step="any" value="{{distLoad[5]}}" onChange="UpdateChart();"></td>
                                <td>
                                    <select id="distloadType" class="distloadType input-sm" name="distloadType" style="width:95px" onChange="UpdateChart();">
                                        <option value="D" {{"selected=""selected""" if distLoad[6]=="D"}}> D </option>
                                        <option value="F" {{"selected=""selected""" if distLoad[6]=="F"}}> F </option>
                                        <option value="L" {{"selected=""selected""" if distLoad[6]=="L"}}> L </option>
                                        <option value="H" {{"selected=""selected""" if distLoad[6]=="H"}}> H </option>
                                        <option value="Lr" {{"selected=""selected""" if distLoad[6]=="Lr"}}> L<sub>r</sub> </option>
                                        <option value="S" {{"selected=""selected""" if distLoad[6]=="S"}} > S </option>
                                        <option value="R" {{"selected=""selected""" if distLoad[6]=="R"}}> R </option>
                                        <option value="Wx" {{"selected=""selected""" if distLoad[6]=="Wx"}}> Wx </option>
                                        <option value="Wy" {{"selected=""selected""" if distLoad[6]=="Wy"}}> Wy </option>
                                        <option value="Ex" {{"selected=""selected""" if distLoad[6]=="Ex"}}> Ex </option>
                                        <option value="Ey" {{"selected=""selected""" if distLoad[6]=="Ey"}}> Ey </option>
                                    </select>
                                </td>
                                <td>
                                    <button type="button" class="addDistLoad btn btn-secondary btn-success btn-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path>
                                        </svg>
                                    </button>
                                    <a href="#" class="removeDistLoad badge badge-danger" style="margin-left: 5px">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                            <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                        </svg>
                                    </a>
                                </td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                    
                </div>
                
                <!-- CONCENTRATED LOAD DATA -->
                <div class="tab-pane container fade" id="concentratedLoads">
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <h5> Point Loads:</h5>
                                <table id="pointloadTable" class="table table-sm table-dark w-auto">
                                    <thead>
                                        <tr id="point_load_header_row">
                                        <th> Load</br>ID </th>
                                        {% if inputs["units"]=="imperial" %}
                                        <th class="text-center"> P (kips) </th>
                                        <th class="text-center"> a (ft) </th>
                                        {% else %}
                                        <th class="text-center"> P (kN) </th>
                                        <th class="text-center"> a (m) </th>
                                        {% endif %}
                                        <th class="text-center"> Load Type</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for ptLoad in inputs["pointLoads"] %}
                                        {% if loop.index0 == 0 %}
                                        <tr class="userPointLoad">
                                        <td class="pointloaduid">{{"P" ~ loop.index}}</td>
                                        <td><input id="pointLoad" name="pointLoad" class="pointLoad input-sm" style="width:95px" type="number" step="any" value="{{ptLoad[0]}}" onChange="UpdateChart();"></td>
                                        <td><input id="pointLoada" name="pointLoada" class="pointLoada input-sm" style="width:95px" type="number" step="any" value="{{ptLoad[1]}}" onChange="UpdateChart();"></td>
                                        <td>
                                            <select id="pointloadType" class="pointloadType input-sm" name="pointloadType" style="width:95px" onChange="UpdateChart();">
                                                <option value="D" {{"selected=""selected""" if ptLoad[2]=="D"}}> D </option>
                                                <option value="F" {{"selected=""selected""" if ptLoad[2]=="F"}}> F </option>
                                                <option value="L" {{"selected=""selected""" if ptLoad[2]=="L"}}> L </option>
                                                <option value="H" {{"selected=""selected""" if ptLoad[2]=="H"}}> H </option>
                                                <option value="Lr" {{"selected=""selected""" if ptLoad[2]=="Lr"}}> L<sub>r</sub> </option>
                                                <option value="S" {{"selected=""selected""" if ptLoad[2]=="S"}}> S </option>
                                                <option value="R" {{"selected=""selected""" if ptLoad[2]=="R"}}> R </option>
                                                <option value="Wx" {{"selected=""selected""" if ptLoad[2]=="Wx"}}> Wx </option>
                                                <option value="Wy" {{"selected=""selected""" if ptLoad[2]=="Wy"}}> Wy </option>
                                                <option value="Ex" {{"selected=""selected""" if ptLoad[2]=="Ex"}}> Ex </option>
                                                <option value="Ey" {{"selected=""selected""" if ptLoad[2]=="Ey"}}> Ey </option>
                                            </select>
                                        </td>
                                        <td>    
                                        <button type="button" class="addPointLoadFirst btn btn-secondary btn-success btn-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                                        </svg>
                                        </button>
                                        </td>
                                        </tr>
                                        {% else %}
                                        <tr class="userPointLoad">
                                            <td class="pointloaduid">{{"P" ~ loop.index}}</td>
                                            <td><input id="pointLoad" name="pointLoad" class="pointLoad input-sm" style="width:95px" type="number" step="any" value="{{ptLoad[0]}}" onChange="UpdateChart();"></td>
                                            <td><input id="pointLoada" name="pointLoada" class="pointLoada input-sm" style="width:95px" type="number" step="any" value="{{ptLoad[1]}}" onChange="UpdateChart();"></td>
                                            <td>
                                                <select id="pointloadType" class="pointloadType input-sm" name="pointloadType" style="width:95px" onChange="UpdateChart();">
                                                    <option value="D" {{"selected=""selected""" if ptLoad[2]=="D"}}> D </option>
                                                    <option value="F" {{"selected=""selected""" if ptLoad[2]=="F"}}> F </option>
                                                    <option value="L" {{"selected=""selected""" if ptLoad[2]=="L"}}> L </option>
                                                    <option value="H" {{"selected=""selected""" if ptLoad[2]=="H"}}> H </option>
                                                    <option value="Lr" {{"selected=""selected""" if ptLoad[2]=="Lr"}}> L<sub>r</sub> </option>
                                                    <option value="S" {{"selected=""selected""" if ptLoad[2]=="S"}}> S </option>
                                                    <option value="R" {{"selected=""selected""" if ptLoad[2]=="R"}}> R </option>
                                                    <option value="Wx" {{"selected=""selected""" if ptLoad[2]=="Wx"}}> Wx </option>
                                                    <option value="Wy" {{"selected=""selected""" if ptLoad[2]=="Wy"}}> Wy </option>
                                                    <option value="Ex" {{"selected=""selected""" if ptLoad[2]=="Ex"}}> Ex </option>
                                                    <option value="Ey" {{"selected=""selected""" if ptLoad[2]=="Ey"}}> Ey </option>
                                                </select>
                                            </td>
                                            <td class="text-nowrap">
                                                <button type="button" class="addPointLoad btn btn-secondary btn-success btn-sm">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path>
                                                    </svg>
                                                </button>
                                                <a href="#" class="removePointLoad badge badge-danger" style="margin-left: 5px">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                                        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                                    </svg>
                                                </a>
                                            </td>
                                        </tr>
                                        {% endif %}
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                            <div class="col">
                                <h5> Point Moments:</h5>
                                <table id="pointmomentTable" class="table table-sm table-dark w-auto">
                                    <thead>
                                        <tr id="point_moment_header_row">
                                        <th> Load</br>ID </th>
                                        {% if inputs["units"]=="imperial" %}
                                        <th class="text-center"> M (ft-kips) </th>
                                        <th class="text-center"> a (ft) </th>
                                        {% else %}
                                        <th class="text-center"> M (kN-m) </th>
                                        <th class="text-center"> a (m) </th>
                                        {% endif %}
                                        <th class="text-center"> Load Type</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for ptMo in inputs["pointMoments"] %}
                                        {% if loop.index0 == 0 %}
                                        <tr class="userPointMoment">
                                        <td class="pointmomentuid">{{"M" ~ loop.index}}</td>
                                        <td><input id="pointMoment" name="pointMoment" class="pointMoment input-sm" style="width:95px" type="number" step="any" value="{{ptMo[0]}}" onChange="UpdateChart();"></td>
                                        <td><input id="pointMomenta" name="pointMomenta" class="pointMomenta input-sm" style="width:95px" type="number" step="any" value="{{ptMo[1]}}" onChange="UpdateChart();"></td>
                                        <td>
                                            <select id="pointMomentType" class="pointMomentType input-sm" name="pointMomentType" style="width:95px" onChange="UpdateChart();">
                                                <option value="D" {{"selected=""selected""" if ptMo[2]=="D"}}> D </option>
                                                <option value="F" {{"selected=""selected""" if ptMo[2]=="F"}}> F </option>
                                                <option value="L" {{"selected=""selected""" if ptMo[2]=="L"}}> L </option>
                                                <option value="H" {{"selected=""selected""" if ptMo[2]=="H"}}> H </option>
                                                <option value="Lr" {{"selected=""selected""" if ptMo[2]=="Lr"}}> L<sub>r</sub> </option>
                                                <option value="S" {{"selected=""selected""" if ptMo[2]=="S"}}> S </option>
                                                <option value="R" {{"selected=""selected""" if ptMo[2]=="R"}}> R </option>
                                                <option value="Wx" {{"selected=""selected""" if ptMo[2]=="Wx"}}> Wx </option>
                                                <option value="Wy" {{"selected=""selected""" if ptMo[2]=="Wy"}}> Wy </option>
                                                <option value="Ex" {{"selected=""selected""" if ptMo[2]=="Ex"}}> Ex </option>
                                                <option value="Ey" {{"selected=""selected""" if ptMo[2]=="Ey"}}> Ey </option>
                                            </select>
                                        </td>
                                        <td>    
                                        <button type="button" class="addPointMomentFirst btn btn-secondary btn-success btn-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                                        </svg>
                                        </button>
                                        </td>
                                        </tr>
                                        {% else %}
                                        <tr class="userPointMoment">
                                            <td class="pointmomentuid">{{"M" ~ loop.index}}</td>
                                            <td><input id="pointMoment" name="pointMoment" class="pointMoment input-sm" style="width:95px" type="number" step="any" value="{{ptMo[0]}}" onChange="UpdateChart();"></td>
                                            <td><input id="pointMomenta" name="pointMomenta" class="pointMomenta input-sm" style="width:95px" type="number" step="any" value="{{ptMo[1]}}" onChange="UpdateChart();"></td>
                                            <td>
                                                <select id="pointMomentType" class="pointMomentType input-sm" name="pointMomentType" style="width:95px" onChange="UpdateChart();">
                                                    <option value="D" {{"selected=""selected""" if ptMo[2]=="D"}}> D </option>
                                                    <option value="F" {{"selected=""selected""" if ptMo[2]=="F"}}> F </option>
                                                    <option value="L" {{"selected=""selected""" if ptMo[2]=="L"}}> L </option>
                                                    <option value="H" {{"selected=""selected""" if ptMo[2]=="H"}}> H </option>
                                                    <option value="Lr" {{"selected=""selected""" if ptMo[2]=="Lr"}}> L<sub>r</sub> </option>
                                                    <option value="S" {{"selected=""selected""" if ptMo[2]=="S"}}> S </option>
                                                    <option value="R" {{"selected=""selected""" if ptMo[2]=="R"}}> R </option>
                                                    <option value="Wx" {{"selected=""selected""" if ptMo[2]=="Wx"}}> Wx </option>
                                                    <option value="Wy" {{"selected=""selected""" if ptMo[2]=="Wy"}}> Wy </option>
                                                    <option value="Ex" {{"selected=""selected""" if ptMo[2]=="Ex"}}> Ex </option>
                                                    <option value="Ey" {{"selected=""selected""" if ptMo[2]=="Ey"}}> Ey </option>
                                                </select>
                                            </td>
                                            <td class="text-nowrap">
                                                <button type="button" class="addPointMoment btn btn-secondary btn-success btn-sm">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                                                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"></path>
                                                    </svg>
                                                </button>
                                                <a href="#" class="removePointMoment badge badge-danger" style="margin-left: 5px">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"></path>
                                                        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"></path>
                                                    </svg>
                                                </a>
                                            </td>
                                        </tr>
                                        {% endif %}
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                {% if results != None %}
                <!-- General DATA -->
                <div class="tab-pane container fade" id="genResults">
                    <div class="container-sm py-3">
                        <strong><u>Basic Reactions Envelope:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                                <th scope="col" class="text-center"></th>
                                {% if results['mainbeam'].endCondition[0]==1 %}<th scope="col" class="text-center">M<sub>L</sub><br>({{results["resunits"]["moment"]}})</th>{% endif %}
                                <th scope="col" class="text-center">R<sub>L</sub><br>({{results["resunits"]["force"]}})</th>
                                {% for support in results['mainbeam'].interiorSupports %}
                                <th scope="col" class="text-center">R<sub>{{loop.index}}</sub><br>({{results["resunits"]["force"]}})</th>
                                {% endfor %}
                                <th scope="col" class="text-center">R<sub>R</sub><br>({{results["resunits"]["force"]}})</th>
                                {% if results['mainbeam'].endCondition[1]==1 %}<th scope="col" class="text-center">M<sub>R</sub><br>({{results["resunits"]["moment"]}})</th>{% endif %}
                            </tr>
                            {% for key, value in results['mainbeam'].reaction_basic_report.items() %}
                            <tr>
                                <td class="text-center">{{key}}</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center">
                                    {% if value['mlmax'][0] == value['mlmin'][0] %}{{"%.4f"|format(value['mlmax'][0])}} {% else %} {{"%.4f"|format(value['mlmax'][0])}} / {{"%.4f"|format(value['mlmin'][0])}} {% endif %}
                                </td>
                                {% endif %}
                                <td class="text-center">{% if value['rlmax'][0] == value['rlmin'][0] %}{{"%.4f"|format(value['rlmax'][0])}} {% else %} {{"%.4f"|format(value['rlmax'][0])}} / {{"%.4f"|format(value['rlmin'][0])}} {% endif %}</td>
                                {% for redundant in value["redundants_max"] %}
                                <td class="text-center">{% if redundant[0] == value["redundants_min"][loop.index0][0] %}{{"%.4f"|format(redundant[0])}} {% else %} {{"%.4f"|format(redundant[0])}} / {{"%.4f"|format(value["redundants_min"][loop.index0][0])}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center">{% if value['rrmax'][0] == value['rrmin'][0] %}{{"%.4f"|format(value['rrmax'][0])}} {% else %} {{"%.4f"|format(value['rrmax'][0])}} / {{"%.4f"|format(value['rrmin'][0])}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center">
                                    {% if value['mrmax'][0] == value['mrmin'][0] %}{{"%.4f"|format(value['mrmax'][0])}} {% else %} {{"%.4f"|format(value['mrmax'][0])}} / {{"%.4f"|format(value['mrmin'][0])}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>
                            {% endfor %}
                        </table>

                        <br><strong><u>Ultimate Reactions Envelope:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                                <th scope="col" class="text-center"></th>
                                {% if results['mainbeam'].endCondition[0]==1 %}<th scope="col" class="text-center">M<sub>L</sub><br>({{results["resunits"]["moment"]}})</th>{% endif %}
                                <th scope="col" class="text-center">R<sub>L</sub><br>({{results["resunits"]["force"]}})</th>
                                {% for support in results['mainbeam'].interiorSupports %}
                                <th scope="col" class="text-center">R<sub>{{loop.index}}</sub><br>({{results["resunits"]["force"]}})</th>
                                {% endfor %}
                                <th scope="col" class="text-center">R<sub>R</sub><br>({{results["resunits"]["force"]}})</th>
                                {% if results['mainbeam'].endCondition[1]==1 %}<th scope="col" class="text-center">M<sub>R</sub><br>({{results["resunits"]["moment"]}})</th>{% endif %}
                            </tr>
                            <tr>
                                <td>Max / Min</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_uls_report['mlmax'][0] == results['mainbeam'].reaction_uls_report['mlmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_uls_report['mlmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_uls_report['mlmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_uls_report['mlmin'][0])}} {% endif %}
                                </td>
                                {% endif %}
                                <td class="text-center">{% if results['mainbeam'].reaction_uls_report['rlmax'][0] == results['mainbeam'].reaction_uls_report['rlmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_uls_report['rlmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_uls_report['rlmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_uls_report['rlmin'][0])}} {% endif %}</td>
                                {% for redundant in results['mainbeam'].reaction_uls_report["redundants_max"] %}
                                <td class="text-center">{% if redundant[0] == results['mainbeam'].reaction_uls_report["redundants_min"][loop.index0][0] %}{{"%.4f"|format(redundant[0])}} {% else %} {{"%.4f"|format(redundant[0])}} / {{"%.4f"|format(results['mainbeam'].reaction_uls_report["redundants_min"][loop.index0][0])}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center">{% if results['mainbeam'].reaction_uls_report['rrmax'][0] == results['mainbeam'].reaction_uls_report['rrmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_uls_report['rrmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_uls_report['rrmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_uls_report['rrmin'][0])}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_uls_report['mrmax'][0] == results['mainbeam'].reaction_uls_report['mrmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_uls_report['mrmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_uls_report['mrmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_uls_report['mrmin'][0])}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>
                            <tr>
                                <td>Combination</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_uls_report['mlmax'][0] == results['mainbeam'].reaction_uls_report['mlmin'][0] %}{{results['mainbeam'].reaction_uls_report['mlmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_uls_report['mlmax'][1][0]}} / {{results['mainbeam'].reaction_uls_report['mlmin'][1][0]}} {% endif %}
                                </td>
                                {% endif %}
                                <td class="text-center">{% if results['mainbeam'].reaction_uls_report['rlmax'][0] == results['mainbeam'].reaction_uls_report['rlmin'][0] %}{{results['mainbeam'].reaction_uls_report['rlmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_uls_report['rlmax'][1][0]}} / {{results['mainbeam'].reaction_uls_report['rlmin'][1][0]}} {% endif %}</td>
                                {% for redundant in results['mainbeam'].reaction_uls_report["redundants_max"] %}
                                <td class="text-center">{% if redundant[0] == results['mainbeam'].reaction_uls_report["redundants_min"][loop.index0][0] %}{{redundant[1][0]}} {% else %} {{redundant[1][0]}} / {{results['mainbeam'].reaction_uls_report["redundants_min"][loop.index0][1][0]}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center">{% if results['mainbeam'].reaction_uls_report['rrmax'][0] == results['mainbeam'].reaction_uls_report['rrmin'][0] %}{{results['mainbeam'].reaction_uls_report['rrmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_uls_report['rrmax'][1][0]}} / {{results['mainbeam'].reaction_uls_report['rrmin'][1][0]}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_uls_report['mrmax'][0] == results['mainbeam'].reaction_uls_report['mrmin'][0] %}{{results['mainbeam'].reaction_uls_report['mrmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_uls_report['mrmax'][1][0]}} / {{results['mainbeam'].reaction_uls_report['mrmin'][1][0]}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>
                            <tr>
                                <td>Pattern</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center text-nowrap">
                                    {% if results['mainbeam'].reaction_uls_report['mlmax'][0] == results['mainbeam'].reaction_uls_report['mlmin'][0] %}{{results['mainbeam'].reaction_uls_report['mlmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_uls_report['mlmax'][1][1]}} /<br> {{results['mainbeam'].reaction_uls_report['mlmin'][1][1]}} {% endif %}
                                </td>
                                {% endif %}
                                <td class="text-center text-nowrap">{% if results['mainbeam'].reaction_uls_report['rlmax'][0] == results['mainbeam'].reaction_uls_report['rlmin'][0] %}{{results['mainbeam'].reaction_uls_report['rlmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_uls_report['rlmax'][1][1]}} /<br> {{results['mainbeam'].reaction_uls_report['rlmin'][1][1]}} {% endif %}</td>
                                {% for redundant in results['mainbeam'].reaction_uls_report["redundants_max"] %}
                                <td class="text-center text-nowrap">{% if redundant[0] == results['mainbeam'].reaction_uls_report["redundants_min"][loop.index0][0] %}{{redundant[1][1]}} {% else %} {{redundant[1][1]}} /<br> {{results['mainbeam'].reaction_uls_report["redundants_min"][loop.index0][1][1]}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center text-nowrap">{% if results['mainbeam'].reaction_uls_report['rrmax'][0] == results['mainbeam'].reaction_uls_report['rrmin'][0] %}{{results['mainbeam'].reaction_uls_report['rrmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_uls_report['rrmax'][1][1]}} /<br> {{results['mainbeam'].reaction_uls_report['rrmin'][1][1]}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center text-nowrap">
                                    {% if results['mainbeam'].reaction_uls_report['mrmax'][0] == results['mainbeam'].reaction_uls_report['mrmin'][0] %}{{results['mainbeam'].reaction_uls_report['mrmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_uls_report['mrmax'][1][1]}} /<br> {{results['mainbeam'].reaction_uls_report['mrmin'][1][1]}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>

                        </table>

                        <br><strong><u>Service Reactions Envelope:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                                <th scope="col" class="text-center"></th>
                                {% if results['mainbeam'].endCondition[0]==1 %}<th scope="col" class="text-center">M<sub>L</sub><br>({{results["resunits"]["moment"]}})</th>{% endif %}
                                <th scope="col" class="text-center">R<sub>L</sub><br>({{results["resunits"]["force"]}})</th>
                                {% for support in results['mainbeam'].interiorSupports %}
                                <th scope="col" class="text-center">R<sub>{{loop.index}}</sub><br>({{results["resunits"]["force"]}})</th>
                                {% endfor %}
                                <th scope="col" class="text-center">R<sub>R</sub><br>({{results["resunits"]["force"]}})</th>
                                {% if results['mainbeam'].endCondition[1]==1 %}<th scope="col" class="text-center">M<sub>R</sub><br>({{results["resunits"]["moment"]}})</th>{% endif %}
                            </tr>
                            <tr>
                                <td>Max / Min</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_sls_report['mlmax'][0] == results['mainbeam'].reaction_sls_report['mlmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_sls_report['mlmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_sls_report['mlmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_sls_report['mlmin'][0])}} {% endif %} 
                                </td>
                                {% endif %}
                                <td class="text-center">{% if results['mainbeam'].reaction_sls_report['rlmax'][0] == results['mainbeam'].reaction_sls_report['rlmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_sls_report['rlmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_sls_report['rlmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_sls_report['rlmin'][0])}} {% endif %}</td>
                                {% for redundant in results['mainbeam'].reaction_sls_report["redundants_max"] %}
                                <td class="text-center">{% if redundant[0] == results['mainbeam'].reaction_sls_report["redundants_min"][loop.index0][0] %}{{"%.4f"|format(redundant[0])}} {% else %} {{"%.4f"|format(redundant[0])}} / {{"%.4f"|format(results['mainbeam'].reaction_sls_report["redundants_min"][loop.index0][0])}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center">{% if results['mainbeam'].reaction_sls_report['rrmax'][0] == results['mainbeam'].reaction_sls_report['rrmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_sls_report['rrmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_sls_report['rrmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_sls_report['rrmin'][0])}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_sls_report['mrmax'][0] == results['mainbeam'].reaction_sls_report['mrmin'][0] %}{{"%.4f"|format(results['mainbeam'].reaction_sls_report['mrmax'][0])}} {% else %} {{"%.4f"|format(results['mainbeam'].reaction_sls_report['mrmax'][0])}} / {{"%.4f"|format(results['mainbeam'].reaction_sls_report['mrmin'][0])}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>
                            <tr>
                                <td>Combination</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_sls_report['mlmax'][0] == results['mainbeam'].reaction_sls_report['mlmin'][0] %}{{results['mainbeam'].reaction_sls_report['mlmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_sls_report['mlmax'][1][0]}} / {{results['mainbeam'].reaction_sls_report['mlmin'][1][0]}} {% endif %}
                                </td>
                                {% endif %}
                                <td class="text-center">{% if results['mainbeam'].reaction_sls_report['rlmax'][0] == results['mainbeam'].reaction_sls_report['rlmin'][0] %}{{results['mainbeam'].reaction_sls_report['rlmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_sls_report['rlmax'][1][0]}} / {{results['mainbeam'].reaction_sls_report['rlmin'][1][0]}} {% endif %}</td>
                                {% for redundant in results['mainbeam'].reaction_sls_report["redundants_max"] %}
                                <td class="text-center">{% if redundant[0] == results['mainbeam'].reaction_sls_report["redundants_min"][loop.index0][0] %}{{redundant[1][0]}} {% else %} {{redundant[1][0]}} / {{results['mainbeam'].reaction_sls_report["redundants_min"][loop.index0][1][0]}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center">{% if results['mainbeam'].reaction_sls_report['rrmax'][0] == results['mainbeam'].reaction_sls_report['rrmin'][0] %}{{results['mainbeam'].reaction_sls_report['rrmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_sls_report['rrmax'][1][0]}} / {{results['mainbeam'].reaction_sls_report['rrmin'][1][0]}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center">
                                    {% if results['mainbeam'].reaction_sls_report['mrmax'][0] == results['mainbeam'].reaction_sls_report['mrmin'][0] %}{{results['mainbeam'].reaction_sls_report['mrmax'][1][0]}} {% else %} {{results['mainbeam'].reaction_sls_report['mrmax'][1][0]}} / {{results['mainbeam'].reaction_sls_report['mrmin'][1][0]}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>
                            <tr>
                                <td>Pattern</td>
                                {% if results['mainbeam'].endCondition[0]==1 %}
                                <td class="text-center text-nowrap">
                                    {% if results['mainbeam'].reaction_sls_report['mlmax'][0] == results['mainbeam'].reaction_sls_report['mlmin'][0] %}{{results['mainbeam'].reaction_sls_report['mlmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_sls_report['mlmax'][1][1]}} /<br> {{results['mainbeam'].reaction_sls_report['mlmin'][1][1]}} {% endif %}
                                </td>
                                {% endif %}
                                <td class="text-center text-nowrap">{% if results['mainbeam'].reaction_sls_report['rlmax'][0] == results['mainbeam'].reaction_sls_report['rlmin'][0] %}{{results['mainbeam'].reaction_sls_report['rlmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_sls_report['rlmax'][1][1]}} /<br> {{results['mainbeam'].reaction_sls_report['rlmin'][1][1]}} {% endif %}</td>
                                {% for redundant in results['mainbeam'].reaction_sls_report["redundants_max"] %}
                                <td class="text-center text-nowrap">{% if redundant[0] == results['mainbeam'].reaction_sls_report["redundants_min"][loop.index0][0] %}{{redundant[1][1]}} {% else %} {{redundant[1][1]}} /<br> {{results['mainbeam'].reaction_sls_report["redundants_min"][loop.index0][1][1]}} {% endif %}</td>
                                {% endfor %}
                                <td class="text-center text-nowrap">{% if results['mainbeam'].reaction_sls_report['rrmax'][0] == results['mainbeam'].reaction_sls_report['rrmin'][0] %}{{results['mainbeam'].reaction_sls_report['rrmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_sls_report['rrmax'][1][1]}} /<br> {{results['mainbeam'].reaction_sls_report['rrmin'][1][1]}} {% endif %}</td>
                                {% if results['mainbeam'].endCondition[1]==1 %}
                                <td class="text-center text-nowrap">
                                    {% if results['mainbeam'].reaction_sls_report['mrmax'][0] == results['mainbeam'].reaction_sls_report['mrmin'][0] %}{{results['mainbeam'].reaction_sls_report['mrmax'][1][1]}} {% else %} {{results['mainbeam'].reaction_sls_report['mrmax'][1][1]}} /<br> {{results['mainbeam'].reaction_sls_report['mrmin'][1][1]}} {% endif %}
                                </td>
                                {% endif %}
                            </tr>
                        </table>

                        <br><strong><u>Main Span:</u></strong>
                        <br><strong><u>Absolute Max/Min Ultimate Moments:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                            <th scope="col" class="text-center">Moment ({{results["resunits"]["moment"]}})</th>
                            <th scope="col" class="text-center">Location ({{ "ft" if inputs["units"]=="imperial" else "m"}})</th>
                            <th scope="col" class="text-center">Combination</th>
                            <th scope="col" class="text-center">Pattern</th>
                            </tr>
                            <tr>
                                <td>{{"%.4f"|format(results['mainbeam'].absMumax["Mu"])}}</td>
                                <td>{{"%.4f"|format(results['mainbeam'].absMumax["Location"])}}</td>
                                <td>{{results['mainbeam'].absMumax["Combo"]}}</td>
                                <td>{{results['mainbeam'].absMumax["Pattern"]}}</td>
                            </tr>
                            <tr>
                                <td>{{"%.4f"|format(results['mainbeam'].absMumin["Mu"])}}</td>
                                <td>{{"%.4f"|format(results['mainbeam'].absMumin["Location"])}}</td>
                                <td>{{results['mainbeam'].absMumin["Combo"]}}</td>
                                <td>{{results['mainbeam'].absMumin["Pattern"]}}</td>
                            </tr>
                        </table>
                        <strong><u>Absolute Max/Min Service Moments:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                            <th scope="col" class="text-center">Moment ({{results["resunits"]["moment"]}})</th>
                            <th scope="col" class="text-center">Location ({{ "ft" if inputs["units"]=="imperial" else "m"}})</th>
                            <th scope="col" class="text-center">Combination</th>
                            <th scope="col" class="text-center">Pattern</th>
                            </tr>
                            <tr>
                                <td>{{"%.4f"|format(results['mainbeam'].absMsmax["Ms"])}}</td>
                                <td>{{"%.4f"|format(results['mainbeam'].absMsmax["Location"])}}</td>
                                <td>{{results['mainbeam'].absMsmax["Combo"]}}</td>
                                <td>{{results['mainbeam'].absMsmax["Pattern"]}}</td>
                            </tr>
                            <tr>
                                <td>{{"%.4f"|format(results['mainbeam'].absMsmin["Ms"])}}</td>
                                <td>{{"%.4f"|format(results['mainbeam'].absMsmin["Location"])}}</td>
                                <td>{{results['mainbeam'].absMsmin["Combo"]}}</td>
                                <td>{{results['mainbeam'].absMsmin["Pattern"]}}</td>
                            </tr>
                        </table>
                        <strong><u>Absolute Max/Min Service Deflections:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                            <th scope="col" class="text-center">Deflection ({{results["resunits"]["delta"]}})</th>
                            <th scope="col" class="text-center">Location ({{ "ft" if inputs["units"]=="imperial" else "m"}})</th>
                            <th scope="col" class="text-center">Combination</th>
                            <th scope="col" class="text-center">Pattern</th>
                            </tr>
                            <tr>
                                <td>{{"%.4f"|format(results['mainbeam'].absDsmax["Ds"])}}</td>
                                <td>{{"%.4f"|format(results['mainbeam'].absDsmax["Location"])}}</td>
                                <td>{{results['mainbeam'].absDsmax["Combo"]}}</td>
                                <td>{{results['mainbeam'].absDsmax["Pattern"]}}</td>
                            </tr>
                            <tr>
                                <td>{{"%.4f"|format(results['mainbeam'].absDsmin["Ds"])}}</td>
                                <td>{{"%.4f"|format(results['mainbeam'].absDsmin["Location"])}}</td>
                                <td>{{results['mainbeam'].absDsmin["Combo"]}}</td>
                                <td>{{results['mainbeam'].absDsmin["Pattern"]}}</td>
                            </tr>
                        </table>

                        <br><strong><u>Ultimate Combinations:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                                <th class="text-center">Name</th>
                                <th class="text-center">Formula</th>
                                <th class="text-center">Patterned</th>
                            </tr>
                            {% for combo in results['ulscombos'] %}
                            <tr>
                                <td class="text-center">{{combo.name}}</td>
                                <td class="text-center">{{combo.FormulaString()}}</td>
                                <td class="text-center">{{ "Yes" if combo.patterned else "No" }}</td>
                            </tr>
                            {% endfor %}
                        </table>

                        <br><strong><u>Service Combinations:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                                <th class="text-center">Name</th>
                                <th class="text-center">Formula</th>
                                <th class="text-center">Patterned</th>
                            </tr>
                            {% for combo in results['slscombos'] %}
                            <tr>
                                <td class="text-center">{{combo.name}}</td>
                                <td class="text-center">{{combo.FormulaString()}}</td>
                                <td class="text-center">{{ "Yes" if combo.patterned else "No" }}</td>
                            </tr>
                            {% endfor %}
                        </table>

                        <br><strong><u>Basic Combinations:</u></strong>
                        <table class="table table-striped w-auto small">
                            <tr>
                                <th class="text-center">Name</th>
                                <th class="text-center">Formula</th>
                                <th class="text-center">Patterned</th>
                            </tr>
                            {% for combo in results['basiccombos'] %}
                            <tr>
                                <td class="text-center">{{combo.name}}</td>
                                <td class="text-center">{{combo.FormulaString()}}</td>
                                <td class="text-center">{{ "Yes" if combo.patterned else "No" }}</td>
                            </tr>
                            {% endfor %}
                        </table>

                        <br><strong><u>Load Patterns:</u></strong>
                        <table class="table table-striped w-auto small">
                            {% for pattern in results['patterns'] %}
                            <tr>
                                <td class="text-center">{{pattern}}</td>
                            </tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
                <!-- ULS DATA -->
                <div class="tab-pane container fade" id="ulsResults">
                    <div class="container-sm py-3">
                        <div id="MuEnvelopePlot" class="w-100 plot"></div>
                    </div>
                    <div class="container-sm py-3">
                        <div id="VuEnvelopePlot" class="w-100 plot"></div>
                    </div>
                    <div class="container-sm py-3">
                        <!-- Left Overhange Results-->
                        {% if results['cantleft'] != None %}
                        <h5>Detailed Left Overhang Results:</h5>
                        <div class="accordion" id="leftULS">
                            {% for combo in results['mainbeam'].reactions_uls %}
                            <div class="card">
                                <div class="card-header" id="uls{{combo}}_header_left">
                                  <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#uls{{combo}}_left" aria-expanded="false" aria-controls="uls{{combo}}_left">
                                      ULS Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                  </h5>
                                </div>
                            
                                <div id="uls{{combo}}_left" class="collapse" aria-labelledby="uls{{combo}}_header_left" data-parent="#leftULS">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_uls[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="uls{{combo}}{{pattern}}_header_left">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['cantleft'].v_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['cantleft'].m_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    +{{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['cantleft'].eis_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['cantleft'].eid_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                        <!-- Main Span Results -->
                        <h5>Detailed Main Span Results:</h5>
                        <div class="accordion" id="mainULS">
                            {% for combo in results['mainbeam'].reactions_uls %}
                            <div class="card">
                                <div class="card-header" id="uls{{combo}}_header">
                                  <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#uls{{combo}}" aria-expanded="false" aria-controls="uls{{combo}}">
                                      ULS Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                  </h5>
                                </div>
                            
                                <div id="uls{{combo}}" class="collapse" aria-labelledby="uls{{combo}}_header" data-parent="#mainULS">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_uls[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="uls{{combo}}{{pattern}}_header">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                        <br> R<sub>L</sub>: {{"%.3f"|format(results['mainbeam'].reactions_uls[combo][pattern]['rl']|float)}} {{results["resunits"]["force"]}} 
                                                        <br> R<sub>R</sub>: {{"%.3f"|format(results['mainbeam'].reactions_uls[combo][pattern]['rr']|float)}} {{results["resunits"]["force"]}}
                                                        <br><u>Redundant Reactions:</u>
                                                        {% for reaction in results['mainbeam'].reactions_uls[combo][pattern]['redundants'] %}
                                                        {% if results['mainbeam'].endCondSum > 0 and loop.index0 == 0 %}
                                                        <br>{% if results['mainbeam'].endCondition[0]==1 %}M<sub>L</sub> : {% else %} M<sub>R</sub> : {% endif %}
                                                        {{"%.3f"|format(reaction|float)}} {{results["resunits"]["moment"]}}
                                                        {% elif results['mainbeam'].endCondSum == 2 and loop.index0 == 1 %}
                                                        <br>M<sub>R</sub> : {{"%.3f"|format(reaction|float)}} {{results["resunits"]["moment"]}}
                                                        {% else %}
                                                        <br>{{"%.3f"|format(reaction|float)}} {{results["resunits"]["force"]}} at {{results['mainbeam'].interiorSupports[loop.index0-results['mainbeam'].endCondSum]}} {{results["resunits"]["length"]}} (local)
                                                        {% endif %}
                                                        {% endfor %}
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['mainbeam'].v_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['mainbeam'].m_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['mainbeam'].eis_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['mainbeam'].eid_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <!-- Right Overhang Results-->
                        {% if results['cantright'] != None %}
                        <h5>Detailed Right Overhang Results:</h5>
                        <div class="accordion" id="rightULS">
                            {% for combo in results['mainbeam'].reactions_uls %}
                            <div class="card">
                                <div class="card-header" id="uls{{combo}}_header_right">
                                  <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#uls{{combo}}_right" aria-expanded="false" aria-controls="uls{{combo}}_right">
                                      ULS Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                  </h5>
                                </div>
                            
                                <div id="uls{{combo}}_right" class="collapse" aria-labelledby="uls{{combo}}_header_right" data-parent="#rightULS">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_uls[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="uls{{combo}}{{pattern}}_header_right">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['cantright'].v_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['cantright'].m_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    +{{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['cantright'].eis_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['cantright'].eid_functions_uls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                <!-- SLS DATA -->
                <div class="tab-pane container fade" id="slsResults">
                    <div class="container-sm py-3">
                        <div id="DsEnvelopePlot" class="w-100 plot"></div>
                    </div>
                    <div class="container-sm py-3">
                        <div id="VsEnvelopePlot" class="w-100 plot"></div>
                    </div>
                    <div class="container-sm py-3">
                        <div id="MsEnvelopePlot" class="w-100 plot"></div>
                    </div>
                    <div class="container-sm py-3">
                        <div id="SsEnvelopePlot" class="w-100 plot"></div>
                    </div>

                    <div class="container-sm py-3">
                        <!-- Left Overhange Results SLS-->
                        {% if results['cantleft'] != None %}
                        <h5>Detailed Left Overhang Results:</h5>
                        <div class="accordion" id="leftSLS">
                            {% for combo in results['mainbeam'].reactions_sls %}
                            <div class="card">
                                <div class="card-header" id="sls{{combo}}_header_left">
                                    <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#sls{{combo}}_left" aria-expanded="false" aria-controls="sls{{combo}}_left">
                                    SLS Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                    </h5>
                                </div>
                            
                                <div id="sls{{combo}}_left" class="collapse" aria-labelledby="sls{{combo}}_header_left" data-parent="#leftSLS">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_sls[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="sls{{combo}}{{pattern}}_header_left">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['cantleft'].v_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['cantleft'].m_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    +{{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['cantleft'].eis_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['cantleft'].eid_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                        <!-- Main Results SLS -->
                        <h5>Detailed Main Span Results:</h5>
                        <div class="accordion" id="mainSLS">
                            {% for combo in results['mainbeam'].reactions_sls %}
                            <div class="card">
                                <div class="card-header" id="sls{{combo}}_header">
                                  <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#sls{{combo}}" aria-expanded="false" aria-controls="sls{{combo}}">
                                      SLS Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                  </h5>
                                </div>
                            
                                <div id="sls{{combo}}" class="collapse" aria-labelledby="sls{{combo}}_header" data-parent="#mainSLS">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_sls[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="sls{{combo}}{{pattern}}_header">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                        <br> R<sub>L</sub>: {{"%.3f"|format(results['mainbeam'].reactions_sls[combo][pattern]['rl']|float)}} {{results["resunits"]["force"]}} 
                                                        <br> R<sub>R</sub>: {{"%.3f"|format(results['mainbeam'].reactions_sls[combo][pattern]['rr']|float)}} {{results["resunits"]["force"]}}
                                                        <br><u>Redundant Reactions:</u>
                                                        {% for reaction in results['mainbeam'].reactions_sls[combo][pattern]['redundants'] %}
                                                        {% if results['mainbeam'].endCondSum > 0 and loop.index0 == 0 %}
                                                        <br>{% if results['mainbeam'].endCondition[0]==1 %}M<sub>L</sub> : {% else %} M<sub>R</sub> : {% endif %}
                                                        {{"%.3f"|format(reaction|float)}} {{results["resunits"]["moment"]}}
                                                        {% elif results['mainbeam'].endCondSum == 2 and loop.index0 == 1 %}
                                                        <br>M<sub>R</sub> : {{"%.3f"|format(reaction|float)}} {{results["resunits"]["moment"]}}
                                                        {% else %}
                                                        <br>{{"%.3f"|format(reaction|float)}} {{results["resunits"]["force"]}} at {{results['mainbeam'].interiorSupports[loop.index0-results['mainbeam'].endCondSum]}} {{results["resunits"]["length"]}} (local)
                                                        {% endif %}
                                                        {% endfor %}
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['mainbeam'].v_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['mainbeam'].m_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['mainbeam'].eis_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['mainbeam'].eid_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <!-- Right Overhang Results SLS-->
                        {% if results['cantright'] != None %}
                        <h5>Detailed Right Overhang Results:</h5>
                        <div class="accordion" id="rightSLS">
                            {% for combo in results['mainbeam'].reactions_sls %}
                            <div class="card">
                                <div class="card-header" id="sls{{combo}}_header_right">
                                    <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#sls{{combo}}_right" aria-expanded="false" aria-controls="sls{{combo}}_right">
                                    SLS Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                    </h5>
                                </div>
                            
                                <div id="sls{{combo}}_right" class="collapse" aria-labelledby="sls{{combo}}_header_right" data-parent="#rightSLS">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_sls[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="sls{{combo}}{{pattern}}_header_right">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['cantright'].v_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['cantright'].m_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    +{{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['cantright'].eis_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['cantright'].eid_functions_sls[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                <!-- Basic DATA -->
                <div class="tab-pane container fade" id="basicResults">
                    
                    <div class="container-sm py-3">
                        <!-- Left Overhang Results Basic -->
                        {% if results['cantleft'] != None %}
                        <h5>Detailed Left Overhang Results:</h5>
                        <div class="accordion" id="leftBASIC">
                            {% for combo in results['mainbeam'].reactions_basic %}
                            <div class="card">
                                <div class="card-header" id="basic{{combo}}_header_left">
                                    <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#basic{{combo}}_left" aria-expanded="false" aria-controls="basic{{combo}}_left">
                                    Basic Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                    </h5>
                                </div>
                            
                                <div id="basic{{combo}}_left" class="collapse" aria-labelledby="basic{{combo}}_header_left" data-parent="#leftBASIC">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_basic[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="basic{{combo}}{{pattern}}_header_left">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['cantleft'].v_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['cantleft'].m_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    +{{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['cantleft'].eis_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['cantleft'].eid_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                        <!-- Main Overhang Results Basic -->
                        <h5>Detailed Main Span Results:</h5>
                        <div class="accordion" id="mainBASIC">
                            {% for combo in results['mainbeam'].reactions_basic %}
                            <div class="card">
                                <div class="card-header" id="basic{{combo}}_header">
                                  <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#basic{{combo}}" aria-expanded="false" aria-controls="basic{{combo}}">
                                      Basic Load Combination: {{combo}}  -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                  </h5>
                                </div>
                            
                                <div id="basic{{combo}}" class="collapse" aria-labelledby="basic{{combo}}_header" data-parent="#mainBASIC">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_basic[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="basic{{combo}}{{pattern}}_header">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                        <br> R<sub>L</sub>: {{"%.3f"|format(results['mainbeam'].reactions_basic[combo][pattern]['rl']|float)}} {{results["resunits"]["force"]}} 
                                                        <br> R<sub>R</sub>: {{"%.3f"|format(results['mainbeam'].reactions_basic[combo][pattern]['rr']|float)}} {{results["resunits"]["force"]}} 
                                                        <br><u>Redundant Reactions:</u>
                                                        {% for reaction in results['mainbeam'].reactions_basic[combo][pattern]['redundants'] %}
                                                        {% if results['mainbeam'].endCondSum > 0 and loop.index0 == 0 %}
                                                        <br>{% if results['mainbeam'].endCondition[0]==1 %}M<sub>L</sub> : {% else %} M<sub>R</sub> : {% endif %}
                                                        {{"%.3f"|format(reaction|float)}} {{results["resunits"]["moment"]}}
                                                        {% elif results['mainbeam'].endCondSum == 2 and loop.index0 == 1 %}
                                                        <br>M<sub>R</sub> : {{"%.3f"|format(reaction|float)}} {{results["resunits"]["moment"]}}
                                                        {% else %}
                                                        <br>{{"%.3f"|format(reaction|float)}} {{results["resunits"]["force"]}} at {{results['mainbeam'].interiorSupports[loop.index0-results['mainbeam'].endCondSum]}} {{results["resunits"]["length"]}} (local)
                                                        {% endif %}
                                                        {% endfor %}
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['mainbeam'].v_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['mainbeam'].m_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['mainbeam'].eis_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['mainbeam'].eid_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                    {% if loop.index0 == 0 %}
                                                    {% for coef in piecef %}
                                                    {% if loop.index0 == 0 %}
                                                    {{"%.4f"|format(coef|float)}}
                                                    {% else %}
                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% else %}
                                                          for {{function[1][0]}} < x <{{function[1][1]}}
                                                    {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <!-- Right Overhang Results Basic -->
                        {% if results['cantright'] != None %}
                        <h5>Detailed Right Overhang Results:</h5>
                        <div class="accordion" id="rightBASIC">
                            {% for combo in results['mainbeam'].reactions_basic %}
                            <div class="card">
                                <div class="card-header" id="basic{{combo}}_header_right">
                                    <h5 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#basic{{combo}}_right" aria-expanded="false" aria-controls="basic{{combo}}_right">
                                    Basic Load Combination: {{combo}} -- {{results['mainbeam'].appliedcombos[combo]['comboformula']}}
                                    </button>
                                    </h5>
                                </div>
                            
                                <div id="basic{{combo}}_right" class="collapse" aria-labelledby="basic{{combo}}_header_right" data-parent="#rightBASIC">
                                    <div class="card-body">
                                            {% for pattern in results['mainbeam'].reactions_basic[combo] %}
                                            <div class="card">
                                                <div class="card-header" id="basic{{combo}}{{pattern}}_header_right">
                                                    <h5>
                                                        <strong>Pattern: {{pattern}}</strong> 
                                                    </h5>
                                                </div>
                                                <div class="card-body">
                                                    <h5>Shear Function  ({{results["resunits"]["force"]}}):</h5>
                                                    {% for function in results['cantright'].v_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>Moment Function ({{results["resunits"]["moment"]}}):</h5>
                                                    {% for function in results['cantright'].m_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    +{{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>                                                                    
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Slope Function (rad):</h5>
                                                    {% for function in results['cantright'].eis_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                    <h5>E*I*Deflection Function ({{results["resunits"]["length"]}}):</h5>
                                                    {% for function in results['cantright'].eid_functions_basic[combo][pattern] %}
                                                    <p>
                                                    {% for piecef in function %}
                                                        {% if loop.index0 == 0 %}
                                                            {% for coef in piecef %}
                                                                {% if loop.index0 == 0 %}
                                                                    {{"%.4f"|format(coef|float)}}
                                                                {% else %}
                                                                    + {{"%.4f"|format(coef|float)}} x<sup>{{loop.index0}}</sup>
                                                                {% endif %}
                                                            {% endfor %}
                                                        {% else %}
                                                            for {{function[1][0]}} < x <{{function[1][1]}}
                                                        {% endif %}
                                                    {% endfor %}
                                                    </p>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                            {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% if results['calclog'] %}
                <div class="tab-pane container fade" id="calclog">
                    <h4>Calculation Log:</h4>
                    <table class="table table-sm w-auto">
                        {% for item in results['log'] %}
                        <tr>
                        <td>{{item}}</td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
                {% endif %}
                {% endif %}

                <!-- HELP Data -->
                <div class="tab-pane container fade" id="HELP">
                    <div class="container-sm py-3">
                        <h5> Supported Load Types:</h5>
                        <dl class="row">
                            <dt class="col-sm-3">D</dt>
                            <dd class="col-sm-9">Dead Load</dd>
                            <dt class="col-sm-3">F</dt>
                            <dd class="col-sm-9">Load due to fluids with well-defined pressures and maximum heights. For BCBC 2018 F represents live load due to fluids in tanks.[Sentence 4.1.3.2(6)]</dd>
                            <dt class="col-sm-3">L</dt>
                            <dd class="col-sm-9">Live Loads</dd>
                            <dt class="col-sm-3">H</dt>
                            <dd class="col-sm-9">Load due to lateral earth pressures, ground water pressure or pressure of bulk materials.</dd>
                            <dt class="col-sm-3">L<sub>r</sub></dt>
                            <dd class="col-sm-9">Roof live load. For BCBC 2018 Lr represents Live loads due to storage areas, equipment areas, or service rooms. [Sentence 4.1.3.2(7)]</dd>
                            <dt class="col-sm-3">S</dt>
                            <dd class="col-sm-9">Snow load</dd>
                            <dt class="col-sm-3">R</dt>
                            <dd class="col-sm-9">Rain load. BCBC 2018 rain loads are not considered for the automatically generated combinations.</dd>
                            <dt class="col-sm-3">Wx</dt>
                            <dd class="col-sm-9">Wind Load in the X or 1 direction.</dd>
                            <dt class="col-sm-3">Wy</dt>
                            <dd class="col-sm-9">Wind Load in the Y or 2 direction.</dd>
                            <dt class="col-sm-3">Ex</dt>
                            <dd class="col-sm-9">Vertical Seismic Load in the X or 1 direction as defined in Section 2.3.6 of ASCE 7.</dd>
                            <dt class="col-sm-3">Ey</dt>
                            <dd class="col-sm-9">Vertical Seismic Load in the Y or 2 direction as defined in Section 2.3.6 of ASCE 7.</dd>
                        </dl>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </form>
</div>

{% if results != None %}
<script>
    var marker_size = 4;
    var plot_type = 'lines+markers';
    let mu_max_main = {{results['mainbeam'].Mu_max|safe}};
    let mu_min_main = {{results['mainbeam'].Mu_min|safe}};
    let vu_max_main = {{results['mainbeam'].Vu_max|safe}};
    let vu_min_main = {{results['mainbeam'].Vu_min|safe}};
    let ds_max_main = {{results['mainbeam'].Ds_max|safe}};
    let ds_min_main = {{results['mainbeam'].Ds_min|safe}};
    let ss_max_main = {{results['mainbeam'].Ss_max|safe}};
    let ss_min_main = {{results['mainbeam'].Ss_min|safe}};
    let vs_max_main = {{results['mainbeam'].Vs_max|safe}};
    let vs_min_main = {{results['mainbeam'].Vs_min|safe}};
    let ms_max_main = {{results['mainbeam'].Ms_max|safe}};
    let ms_min_main = {{results['mainbeam'].Ms_min|safe}};

    let x_main = {{results['mainbeam'].chartstations|safe}};

    let ann_mu_max = Math.max(...mu_max_main);
    let ann_mu_min = Math.min(...mu_min_main);
    let ann_vu_max = Math.max(...vu_max_main);
    let ann_vu_min = Math.min(...vu_min_main);
    let ann_ds_max = Math.max(...ds_max_main);
    let ann_ds_min = Math.min(...ds_min_main);

    let mu_max_index = _.indexOf(mu_max_main,ann_mu_max);
    let mu_min_index = _.indexOf(mu_min_main,ann_mu_min);
    let vu_max_index = _.indexOf(vu_max_main,ann_vu_max);
    let vu_min_index = _.indexOf(vu_min_main,ann_vu_min);
    let ds_max_index = _.indexOf(ds_max_main,ann_ds_max);
    let ds_min_index = _.indexOf(ds_min_main,ann_ds_min);

    var mu_max = {
        x: x_main,
        y: mu_max_main,
        mode: plot_type,
        name: 'Mu,max (main)',
        marker: {
            size: marker_size,
            color: 'rgb(128,0,0)'
        },
        line: {
            color: 'rgbd(128,0,0)'
        }
    };

    var mu_min = {
        x: x_main,
        y: mu_min_main,
        mode: plot_type,
        name: 'Mu,min (main)',
        marker: {
            size: marker_size,
            color: 'rgb(255,0,0)'
        },
        line: {
            color: 'rgbd(255,0,0)'
        }
    };

    var ms_max = {
        x: x_main,
        y: ms_max_main,
        mode: plot_type,
        name: 'Ms,max (main)',
        marker: {
            size: marker_size,
            color: 'rgb(128,0,0)'
        },
        line: {
            color: 'rgbd(128,0,0)'
        }
    };

    var ms_min = {
        x: x_main,
        y: ms_min_main,
        mode: plot_type,
        name: 'Ms,min (main)',
        marker: {
            size: marker_size,
            color: 'rgb(255,0,0)'
        },
        line: {
            color: 'rgbd(255,0,0)'
        }
    };

    var vu_max = {
        x: x_main,
        y: vu_max_main,
        mode: plot_type,
        name: 'Vu,max (main)',
        marker: {
            size: marker_size,
            color: 'rgb(0,128,0)'
        },
        line: {
            color: 'rgbd(0,128,0)'
        }
    };

    var vu_min = {
        x: x_main,
        y: vu_min_main,
        mode: plot_type,
        name: 'Vu,min (main)',
        marker: {
            size: marker_size,
            color: 'rgb(0,255,0)'
        },
        line: {
            color: 'rgbd(0,255,0)'
        }
    };

    var vs_max = {
        x: x_main,
        y: vs_max_main,
        mode: plot_type,
        name: 'Vs,max (main)',
        marker: {
            size: marker_size,
            color: 'rgb(0,128,0)'
        },
        line: {
            color: 'rgbd(0,128,0)'
        }
    };

    var vs_min = {
        x: x_main,
        y: vs_min_main,
        mode: plot_type,
        name: 'Vs,min (main)',
        marker: {
            size: marker_size,
            color: 'rgb(0,255,0)'
        },
        line: {
            color: 'rgbd(0,255,0)'
        }
    };

    var ss_max = {
        x: x_main,
        y: ss_max_main,
        mode: plot_type,
        name: 'Ss,max (main)',
        marker: {
            size: marker_size,
            color: 'rgb(102,0,102)'
        },
        line: {
            color: 'rgbd(102,0,102)'
        }
    };

    var ss_min = {
        x: x_main,
        y: ss_min_main,
        mode: plot_type,
        name: 'Ss,min (main)',
        marker: {
            size: marker_size,
            color: 'rgb(204,0,204)'
        },
        line: {
            color: 'rgbd(204,0,204)'
        }
    };

    var ds_max = {
        x: x_main,
        y: ds_max_main,
        mode: plot_type,
        name: 'Ds,max (main)',
        marker: {
            size: marker_size,
            color: 'rgb(25,25,102)'
        },
        line: {
            color: 'rgbd(25,25,102)'
        }
    };

    var ds_min = {
        x: x_main,
        y: ds_min_main,
        mode: plot_type,
        name: 'Ds,min (main)',
        marker: {
            size: marker_size,
            color: 'rgb(50,50,205)'
        },
        line: {
            color: 'rgbd(50,50,205)'
        }
    };

    {% if results['cantleft'] != None %}
        let x_left = {{results['cantleft'].chartstations|safe}};
        let mu_max_left = {{results['cantleft'].Mu_max|safe}};
        let mu_min_left = {{results['cantleft'].Mu_min|safe}};
        let vu_max_left = {{results['cantleft'].Vu_max|safe}};
        let vu_min_left = {{results['cantleft'].Vu_min|safe}};
        let vs_max_left = {{results['cantleft'].Vs_max|safe}};
        let vs_min_left = {{results['cantleft'].Vs_min|safe}};
        let ms_max_left = {{results['cantleft'].Ms_max|safe}};
        let ms_min_left = {{results['cantleft'].Ms_min|safe}};
        let ss_max_left = {{results['cantleft'].Ss_max|safe}};
        let ss_min_left = {{results['cantleft'].Ss_min|safe}};
        let ds_max_left = {{results['cantleft'].Ds_max|safe}};
        let ds_min_left = {{results['cantleft'].Ds_min|safe}};
        var inlegend = true;

    {% else %}
        let x_left = [0];
        let mu_max_left = [0];
        let mu_min_left = [0];
        let vu_max_left = [0];
        let vu_min_left = [0];
        let vs_max_left = [0];
        let vs_min_left = [0];
        let ms_max_left = [0];
        let ms_min_left = [0];
        let ss_max_left = [0];
        let ss_min_left = [0];
        let ds_max_left = [0];
        let ds_min_left = [0];
        var inlegend = false;
    {% endif %}

    var left_mu_max = {
        x: x_left,
        y: mu_max_left,
        mode: plot_type,
        name: 'Mu,max (left)',
        marker: {
            size: marker_size,
            color: 'rgb(153, 31, 0)'
        },
        line: {
            color: 'rgbd(153, 31, 0)'
        },
        showlegend: inlegend
    };

    var left_mu_min = {
        x: x_left,
        y: mu_min_left,
        mode: plot_type,
        name: 'Mu,min (left)',
        marker: {
            size: marker_size,
            color: 'rgb(255, 51, 0)'
        },
        line: {
            color: 'rgbd(255, 51, 0)'
        },
        showlegend: inlegend
    };

    var left_ms_max = {
        x: x_left,
        y: ms_max_left,
        mode: plot_type,
        name: 'Ms,max (left)',
        marker: {
            size: marker_size,
            color: 'rgb(153, 31, 0)'
        },
        line: {
            color: 'rgbd(153, 31, 0)'
        },
        showlegend: inlegend
    };

    var left_ms_min = {
        x: x_left,
        y: ms_min_left,
        mode: plot_type,
        name: 'Ms,min (left)',
        marker: {
            size: marker_size,
            color: 'rgb(255, 51, 0)'
        },
        line: {
            color: 'rgbd(255, 51, 0)'
        },
        showlegend: inlegend
    };

    var left_vu_max = {
        x: x_left,
        y: vu_max_left,
        mode: plot_type,
        name: 'Vu,max (left)',
        marker: {
            size: marker_size,
            color: 'rgb(55,128,0)'
        },
        line: {
            color: 'rgbd(55,128,0)'
        },
        showlegend: inlegend
    };

    var left_vu_min = {
        x: x_left,
        y: vu_min_left,
        mode: plot_type,
        name: 'Vu,min (left)',
        marker: {
            size: marker_size,
            color: 'rgb(55,255,0)'
        },
        line: {
            color: 'rgbd(55,255,0)'
        },
        showlegend: inlegend
    };

    var left_vs_max = {
        x: x_left,
        y: vs_max_left,
        mode: plot_type,
        name: 'Vs,max (left)',
        marker: {
            size: marker_size,
            color: 'rgb(55,128,0)'
        },
        line: {
            color: 'rgbd(55,128,0)'
        },
        showlegend: inlegend
    };

    var left_vs_min = {
        x: x_left,
        y: vs_min_left,
        mode: plot_type,
        name: 'Vs,min (left)',
        marker: {
            size: marker_size,
            color: 'rgb(55,255,0)'
        },
        line: {
            color: 'rgbd(55,255,0)'
        },
        showlegend: inlegend
    };

    var left_ss_max = {
        x: x_left,
        y: ss_max_left,
        mode: plot_type,
        name: 'Ss,max (left)',
        marker: {
            size: marker_size,
            color: 'rgb(102,80,102)'
        },
        line: {
            color: 'rgbd(102,80,102)'
        },
        showlegend: inlegend
    };

    var left_ss_min = {
        x: x_left,
        y: ss_min_left,
        mode: plot_type,
        name: 'Ss,min (left)',
        marker: {
            size: marker_size,
            color: 'rgb(204,80,204)'
        },
        line: {
            color: 'rgbd(204,80,204)'
        },
        showlegend: inlegend
    };

    var left_ds_max = {
        x: x_left,
        y: ds_max_left,
        mode: plot_type,
        name: 'Ds,max (left)',
        marker: {
            size: marker_size,
            color: 'rgb(0,115,153)'
        },
        line: {
            color: 'rgbd(0,115,153)'
        },
        showlegend: inlegend
    };

    var left_ds_min = {
        x: x_left,
        y: ds_min_left,
        mode: plot_type,
        name: 'Ds,min (left)',
        marker: {
            size: marker_size,
            color: 'rgb(0,172,230)'
        },
        line: {
            color: 'rgbd(0,172,230)'
        },
        showlegend: inlegend
    };

    {% if results['cantright'] != None %}
        let x_right = {{results['cantright'].chartstations|safe}};
        let mu_max_right = {{results['cantright'].Mu_max|safe}};
        let mu_min_right = {{results['cantright'].Mu_min|safe}};
        let vu_max_right = {{results['cantright'].Vu_max|safe}};
        let vu_min_right = {{results['cantright'].Vu_min|safe}};
        let vs_max_right = {{results['cantright'].Vs_max|safe}};
        let vs_min_right = {{results['cantright'].Vs_min|safe}};
        let ms_max_right = {{results['cantright'].Ms_max|safe}};
        let ms_min_right = {{results['cantright'].Ms_min|safe}};
        let ss_max_right = {{results['cantright'].Ss_max|safe}};
        let ss_min_right = {{results['cantright'].Ss_min|safe}};
        let ds_max_right = {{results['cantright'].Ds_max|safe}};
        let ds_min_right = {{results['cantright'].Ds_min|safe}};
        var inlegend_right = true;

    {% else %}
        let x_right = [0];
        let mu_max_right = [0];
        let mu_min_right = [0];
        let vu_max_right = [0];
        let vu_min_right = [0];
        let vs_max_right = [0];
        let vs_min_right = [0];
        let ms_max_right = [0];
        let ms_min_right = [0];
        let ss_max_right = [0];
        let ss_min_right = [0];
        let ds_max_right = [0];
        let ds_min_right = [0];
        var inlegend_right = false;
    {% endif %}

    var right_mu_max = {
        x: x_right,
        y: mu_max_right,
        mode: plot_type,
        name: 'Mu,max (right)',
        marker: {
            size: marker_size,
            color: 'rgb(153, 0, 31)'
        },
        line: {
            color: 'rgbd(153, 0, 31)'
        },
        showlegend: inlegend_right
    };

    var right_mu_min = {
        x: x_right,
        y: mu_min_right,
        mode: plot_type,
        name: 'Mu,min (right)',
        marker: {
            size: marker_size,
            color: 'rgb(255, 0, 51)'
        },
        line: {
            color: 'rgbd(255, 0, 51)'
        },
        showlegend: inlegend_right
    };

    var right_ms_max = {
        x: x_right,
        y: ms_max_right,
        mode: plot_type,
        name: 'Ms,max (right)',
        marker: {
            size: marker_size,
            color: 'rgb(153, 0, 31)'
        },
        line: {
            color: 'rgbd(153, 0, 31)'
        },
        showlegend: inlegend_right
    };

    var right_ms_min = {
        x: x_right,
        y: ms_min_right,
        mode: plot_type,
        name: 'Ms,min (right)',
        marker: {
            size: marker_size,
            color: 'rgb(255, 0, 51)'
        },
        line: {
            color: 'rgbd(255, 0, 51)'
        },
        showlegend: inlegend_right
    };

    var right_vu_max = {
        x: x_right,
        y: vu_max_right,
        mode: plot_type,
        name: 'Vu,max (right)',
        marker: {
            size: marker_size,
            color: 'rgb(0,128,55)'
        },
        line: {
            color: 'rgbd(0,128,55)'
        },
        showlegend: inlegend_right
    };

    var right_vu_min = {
        x: x_right,
        y: vu_min_right,
        mode: plot_type,
        name: 'Vu,min (right)',
        marker: {
            size: marker_size,
            color: 'rgb(0,255,55)'
        },
        line: {
            color: 'rgbd(0,255,55)'
        },
        showlegend: inlegend_right
    };

    var right_vs_max = {
        x: x_right,
        y: vs_max_right,
        mode: plot_type,
        name: 'Vs,max (right)',
        marker: {
            size: marker_size,
            color: 'rgb(0,128,55)'
        },
        line: {
            color: 'rgbd(0,128,55)'
        },
        showlegend: inlegend_right
    };

    var right_vs_min = {
        x: x_right,
        y: vs_min_right,
        mode: plot_type,
        name: 'Vs,min (right)',
        marker: {
            size: marker_size,
            color: 'rgb(0,255,55)'
        },
        line: {
            color: 'rgbd(0,255,55)'
        },
        showlegend: inlegend_right
    };

    var right_ss_max = {
        x: x_right,
        y: ss_max_right,
        mode: plot_type,
        name: 'Ss,max (right)',
        marker: {
            size: marker_size,
            color: 'rgb(102,40,102)'
        },
        line: {
            color: 'rgbd(102,40,102)'
        },
        showlegend: inlegend_right
    };

    var right_ss_min = {
        x: x_right,
        y: ss_min_right,
        mode: plot_type,
        name: 'Ss,min (right)',
        marker: {
            size: marker_size,
            color: 'rgb(204,40,204)'
        },
        line: {
            color: 'rgbd(204,40,204)'
        },
        showlegend: inlegend_right
    };

    var right_ds_max = {
        x: x_right,
        y: ds_max_right,
        mode: plot_type,
        name: 'Ds,max (right)',
        marker: {
            size: marker_size,
            color: 'rgb(0,0,128)'
        },
        line: {
            color: 'rgbd(0,0,128)'
        },
        showlegend: inlegend_right
    };

    var right_ds_min = {
        x: x_right,
        y: ds_min_right,
        mode: plot_type,
        name: 'Ds,min (right)',
        marker: {
            size: marker_size,
            color: 'rgb(0,0,255)'
        },
        line: {
            color: 'rgbd(0,0,255)'
        },
        showlegend: inlegend_right
    };

    var mu_envelope = [mu_max,mu_min, left_mu_max, left_mu_min, right_mu_max, right_mu_min];
    var vu_envelope = [vu_max,vu_min, left_vu_max, left_vu_min, right_vu_max, right_vu_min];
    var vs_envelope = [vs_max,vs_min, left_vs_max, left_vs_min, right_vs_max, right_vs_min];
    var ms_envelope = [ms_max,ms_min, left_ms_max, left_ms_min, right_ms_max, right_ms_min];
    var ss_envelope = [ss_max,ss_min, left_ss_max, left_ss_min, right_ss_max, right_ss_min];
    var ds_envelope = [ds_max,ds_min, left_ds_max, left_ds_min, right_ds_max, right_ds_min];

    var w = 1000;
    var h = 400;

    var mu_layout = {
        title: "ULS Moment Envelope ({{results["resunits"]["moment"]}})",
        width: w,
        height: h,
        annotations:[
            {
                x: x_main[mu_max_index],
                y: ann_mu_max,
                xref: 'x',
                yref: 'y',
                text: "<b>"+ ann_mu_max.toFixed(3).toString()+" {{results["resunits"]["moment"]}} @ "+ x_main[mu_max_index].toFixed(3).toString()+" {{results["resunits"]["length"]}} </b>",
                showarrow: true,
                font: {
                    size: 14,
                    color: '#ffffff'
                },
                align: 'center',
                arrowhead: 1,
                arrowsize: 1,
                arrowwidth: 1,
                arrowcolor: '#000000',
                ax: 0,
                ay: -40,
                bordercolor: '#000000',
                borderwidth: 1,
                borderpad: 4,
                bgcolor: '#800000',
                opacity: 0.8
            },
            {
                x: x_main[mu_min_index],
                y: ann_mu_min,
                xref: 'x',
                yref: 'y',
                text: "<b>"+ ann_mu_min.toFixed(3).toString()+" {{results["resunits"]["moment"]}} @ "+ x_main[mu_min_index].toFixed(3).toString()+" {{results["resunits"]["length"]}}</b>",
                showarrow: true,
                font: {
                    size: 14,
                    color: '#000000'
                },
                align: 'center',
                arrowhead: 1,
                arrowsize: 1,
                arrowwidth: 1,
                arrowcolor: '#000000',
                ax: 0,
                ay: 40,
                bordercolor: '#000000',
                borderwidth: 1,
                borderpad: 4,
                bgcolor: '#ff0000',
                opacity: 0.8
            },
        ]
    };

    var vu_layout = {
        title: "ULS Shear Envelope ({{results["resunits"]["force"]}})",
        width: w,
        height: h,
        annotations:[
            {
                x: x_main[vu_max_index],
                y: ann_vu_max,
                xref: 'x',
                yref: 'y',
                text: "<b>"+ ann_vu_max.toFixed(3).toString()+" {{results["resunits"]["force"]}} @ "+ x_main[vu_max_index].toFixed(3).toString()+" {{results["resunits"]["length"]}}</b>",
                showarrow: true,
                font: {
                    size: 14,
                    color: '#ffffff'
                },
                align: 'center',
                arrowhead: 1,
                arrowsize: 1,
                arrowwidth: 1,
                arrowcolor: '#000000',
                ax: 0,
                ay: -40,
                bordercolor: '#000000',
                borderwidth: 1,
                borderpad: 4,
                bgcolor: '#008000',
                opacity: 0.8
            },
            {
                x: x_main[vu_min_index],
                y: ann_vu_min,
                xref: 'x',
                yref: 'y',
                text: "<b>"+ann_vu_min.toFixed(3).toString()+" {{results["resunits"]["force"]}} @ "+ x_main[vu_min_index].toFixed(3).toString()+" {{results["resunits"]["length"]}}</b>",
                showarrow: true,
                font: {
                    size: 14,
                    color: '#000000'
                },
                align: 'center',
                arrowhead: 1,
                arrowsize: 1,
                arrowwidth: 1,
                arrowcolor: '#000000',
                ax: 0,
                ay: 40,
                bordercolor: '#000000',
                borderwidth: 1,
                borderpad: 4,
                bgcolor: '#00ff00',
                opacity: 0.8
            },
        ]
    };

    var vs_layout = {
        title: "SLS Shear Envelope ({{results["resunits"]["force"]}})",
        width: w,
        height: h,
    };

    var ms_layout = {
        title: "SLS Moment Envelope ({{results["resunits"]["moment"]}})",
        width: w,
        height: h,
    };

    var ss_layout = {
        title: "SLS Slope Envelope (rad)",
        width: w,
        height: h,
    };

    var ds_layout = {
        title: "SLS Deflection Envelope ({{results["resunits"]["delta"]}})",
        width: w,
        height: h,
        annotations:[
            {
                x: x_main[ds_max_index],
                y: ann_ds_max,
                xref: 'x',
                yref: 'y',
                text: "<b>"+ann_ds_max.toFixed(4).toString()+" {{results["resunits"]["delta"]}} @ "+ x_main[ds_max_index].toFixed(3).toString() +" {{results["resunits"]["length"]}}</b>",
                showarrow: true,
                font: {
                    size: 14,
                    color: '#ffffff'
                },
                align: 'center',
                arrowhead: 1,
                arrowsize: 1,
                arrowwidth: 1,
                arrowcolor: '#000000',
                ax: 0,
                ay: -40,
                bordercolor: '#000000',
                borderwidth: 1,
                borderpad: 4,
                bgcolor: '#191966',
                opacity: 0.8
            },
            {
                x: x_main[ds_min_index],
                y: ann_ds_min,
                xref: 'x',
                yref: 'y',
                text: "<b>"+ann_ds_min.toFixed(4).toString()+" {{results["resunits"]["delta"]}} @ "+ x_main[ds_min_index].toFixed(3).toString() +" {{results["resunits"]["length"]}}</b>",
                showarrow: true,
                font: {
                    size: 14,
                    color: '#ffffff'
                },
                align: 'center',
                arrowhead: 1,
                arrowsize: 1,
                arrowwidth: 1,
                arrowcolor: '#000000',
                ax: 0,
                ay: 40,
                bordercolor: '#000000',
                borderwidth: 1,
                borderpad: 4,
                bgcolor: '#3232cd',
                opacity: 0.8
            },
        ]
    };

    var config = {responsive: true}

    Plotly.newPlot("MuEnvelopePlot", mu_envelope, mu_layout, config);

    Plotly.newPlot("VuEnvelopePlot", vu_envelope, vu_layout, config);

    Plotly.newPlot("DsEnvelopePlot", ds_envelope, ds_layout, config);

    Plotly.newPlot("VsEnvelopePlot", vs_envelope, vs_layout, config);

    Plotly.newPlot("MsEnvelopePlot", ms_envelope, ms_layout, config);

    Plotly.newPlot("SsEnvelopePlot", ss_envelope, ss_layout, config);
    
</script>

{% endif %}

<script>
    $(window).on('load', function () {
      $('#loading').hide();
    });
</script>

<script>
    function ShowLoading(){
        $('#loading').show();
    };
</script>

{% endblock content %}
